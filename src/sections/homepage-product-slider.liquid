<div class="container xl margin-bottom-5x">
  <div class="row">
    <div class="column l12 center">
      <h2 class="ProductSlider__heading">{{section.settings.heading}}</h2>
      <p class="ProductSlider__subheading">{{section.settings.subheading}}</p>
    </div>
  </div>
  <div class="row">
    <div class="ProductSlider">
      <div class="ProductSlider__swiper-container swiper-container">
        <div class="swiper-wrapper">
          {% assign numOfProducts = section.settings.numOfProducts | plus: 0 %}
          {% for product in collections[section.settings.collection].products limit: numOfProducts %}
          <div class="ProductSlider__slide swiper-slide column l4">
            <div class="ProductSlider__product-num">{{forloop.index}}</div>
            {% include 'collection-product' %}
          </div>
          {% endfor %}
        </div>
        <div class="column l12">
          <div class="ProductSlider__swiper-scrollbar"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  var ProductSlider = new Swiper('.ProductSlider__swiper-container', {
    slidesPerView: 5,
    spaceBetween: 5,
    loop: false,
    centeredSlides: false,
    mousewheel: true,
    freeMode: true,
    keyboard: true,
    scrollbar: {
      el: '.ProductSlider__swiper-scrollbar',
      draggable: true
    },
    breakpoints: {
      // when window width is <= 320px
      800: {
        slidesPerView: 4,
        spaceBetween: 5
      },
      600: {
        slidesPerView: 3,
        spaceBetween: 5
      },
      400: {
        slidesPerView: 2,
        spaceBetween: 5
      }
    }
  });
</script>


{% schema %}
  {
    "name": "Product Slider",
    "settings":[
      {
        "type":"text",
        "id":"heading",
        "label":"Heading",
        "default":"Top 10"
      },
      {
        "type":"text",
        "id":"subheading",
        "label":"SubHeading",
        "default":"Shop our customer's favorites"
      },
      {
        "type":"collection",
        "id":"collection",
        "label":"Collection"  
      },
      {
        "type":"text",
        "id":"numOfProducts",
        "label":"Number of Products",
        "default":"7"
      }
    ],
    "presets": [
      {
        "name": "Product Slider",
        "category": "Homepage"
      }
    ]
  }
{% endschema %}